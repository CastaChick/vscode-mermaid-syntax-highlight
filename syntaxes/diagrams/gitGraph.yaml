- comment: Git Graph
  begin: ^\s*(gitGraph)
  beginCaptures:
    '1':
      name: keyword.control.mermaid
  patterns:
  - match: \%%.*
    name: comment
  - comment: commit
    begin: !regex |-
      \s*(commit) # commit
    beginCaptures:
      '1':
        name: keyword.control.mermaid
    patterns:
    - comment: '(id)(:) ("id")'
      match: !regex |-
        \s*(id) # id
        (:) # :
        \s("[\($&%\^/#.,?!;:*+=<>\'\\\-\w\s]*") # text
      captures:
        '1':
          name: keyword.control.mermaid
        '2':
          name: keyword.control.mermaid
        '3':
          name: string
    - comment: '(type)(:) (COMMIT_TYPE)'
      match: !regex |-
        \s*(type) # type
        (:) # :
        \s(NORMAL|REVERSE|HIGHLIGHT) # commit_type
      captures:
        '1':
          name: keyword.control.mermaid
        '2':
          name: keyword.control.mermaid
        '3':
          name: entity.name.function.mermaid
    - comment: '(tag)(:) ("tag")'
      match: !regex |-
        \s*(tag) # tag
        (:) # :
        \s("[\($&%\^/#.,?!;:*+=<>\'\\\-\w\s]*") # text
      captures:
        '1':
          name: keyword.control.mermaid
        '2':
          name: keyword.control.mermaid
        '3':
          name: string
    end: "$"
  end: (^|\G)(?=\s*[`~]{3,}\s*$)
