{
	"fileTypes": [],
	"injectionSelector": "L:markup.fenced_code.block.markdown",
	"patterns": [
		{
			"include": "#mermaid-code-block"
		}
	],
	"repository": {
		"mermaid-code-block": {
			"begin": "(?<=[`~])mermaid(\\s+[^`~]*)?$",
			"end": "(^|\\G)(?=\\s*[`~]{3,}\\s*$)",
			"patterns": [
                {
                    "match": "\\b(subgraph)\\s+([A-Za-z\\ 0-9]+)",
                    "captures": {
                        "1": {
                            "name": "keyword.control.mermaid"
                        },
                        "2": {
                            "name": "entity.name.function.mermaid"
                        }
                    },
                    "name": "meta.function.mermaid"
                },
                {
                    "match": "\\b(graph)\\s+([A-Za-z\\ 0-9]+)",
                    "captures": {
                        "1": {
                            "name": "keyword.control.mermaid"
                        },
                        "2": {
                            "name": "entity.name.function.mermaid"
                        }
                    },
                    "name": "meta.function.mermaid"
                },
                {
                    "match": "\\b(end|RB|BT|RL|TD|LR)\\b",
                    "name": "keyword.control.mermaid"
                },
                {
                    "match": "\\b([\\%]{2}\\s?.+)\\b",
                    "captures": {
                        "1": {
                            "name": "punctuation.definition.comment.mermaid"
                        }
                    },
                    "name": "punctuation.definition.comment.mermaid"
                },
                {
                    "comment": "(Entity From)(Graph Link)",
                    "begin": "(\\b[-\\w]+\\b\\s*)(-?-[-\\>]\\|?|=?=[=\\>]|(?:\\.-|-\\.)-?\\>?)",
                    "beginCaptures": {
                        "1": {
                            "name": "variable"
                        },
                        "2": {
                            "name": "keyword.operator.arrow.mermaid"
                        }
                    },
                    "patterns": [
                        {
                            "match": "%%.*",
                            "name": "comment"
                        },
                        {
                            "comment": "(Graph Link Text)(Graph Link)(Entity To)",
                            "match": "(\\s*[\"\\w\\s]*\\b)(-?-[-\\>]\\|?|=?=[=\\>]|(?:\\.-|-\\.)-?\\>?|\\|)(\\s*[-\\w]+\\b)",
                            "captures": {
                                "1": {
                                    "name": "string"
                                },
                                "2": {
                                    "name": "keyword.operator.arrow.mermaid"
                                },
                                "3": {
                                    "name": "variable"
                                }
                            }
                        },
                        {
                            "comment": "(Entity To)",
                            "match": "(\\s*[-\\w]+\\b)",
                            "captures": {
                                "1": {
                                    "name": "variable"
                                }
                            }
                        }
                    ],
                    "end": "$"
                },
                {
                    "comment": "(Entity)(Edge/Shape)(Text)(Edge/Shape)",
                    "match": "(\\b[-\\w]+\\b\\s*)(\\[|\\(+|\\>|\\{)(\\s*[\"\\(\\)#;:\\-\\w\\s]*)(\\]|\\)+|\\})",
                    "captures": {
                        "1": {
                            "name": "variable"
                        },
                        "2": {
                            "name": "keyword.operator.arrow.mermaid"
                        },
                        "3": {
                            "name": "string"
                        },
                        "4": {
                            "name": "keyword.operator.arrow.mermaid"
                        }
                    }
                },
                {
                    "match": "%%.*",
                    "name": "comment"
                },
                {
                    "match": "\\b(([0-9]+\\.?[0-9]*)|(\\.[0-9]+))\\b",
                    "name": "constant.numeric.mermaid"
                }
			]
		}
	},
	"scopeName": "markdown.mermaid.codeblock"
}